<HTML>
<head>
<title>DFO/RV Survey Numbers and Weights</title>
<script type="text/javascript" src="/r/parser.js"></script>
<script type="text/javascript" src="/r/scripts.js"></script>
<link rel="stylesheet" type="text/css" href="/r/rStyle.css" />

<script type="text/javascript">
window.onload=function() {
		for (var j=0;j<document.forms[0].elements.length;j++){
			document.forms[0].elements[j].onchange=function(){parseIt(0);}
		}
}
</script>
</head>
<body>
<h1 class="statTitle">DFO/RV Survey Numbers and Weights</h1>
<noscript><div class="warning"><b>Warning:</b> Enabling Javascript will give you a better experience, including access to the SQL generated by this page.</div></noscript>
<div class="warning">April 17, 2013 - These analyses have not yet been rigorously QC'd.
</div>
<fieldset>
<legend>DFO/RV Survey Numbers and Weights</legend>
<form id ="0" action="/plonescript/mfnumbersandweights.R" method="post">

<!--- statserver arguments --->
<input type="hidden" name="AOC" value="mfnumbersandweights" />
<input type=hidden name="Return" value=3 />
<input type=hidden name="graphic" value=0 />
<input type=hidden name=fileOut value=6 />
<input type=hidden name=graphicFormat value="GIF" />
<input type="hidden" name="SqlInDsn" value="bank2" />
<!--- make query arguments --->
<input type="hidden" name="ProcessSql" value=true />
<input type="hidden" name="QueryArgs" value="11100" />
<input type="hidden" name="TitleArgs" value="11111" />
<input type="hidden" name="NumDataArgs" value="2" />
<input type="hidden" name="DataName1" value="Title" />
<input type="hidden" name="Data1" value="DFO/RV Survey Numbers and Weights" />
<input type="hidden" name="DataName2" value="Overlay Plots" />
<!--- make query arguments --->

<input type="hidden" name="sselect" value="
SELECT 
 i.year, SUM(i.tunits) tunits, SUM(ntows) sets,
 ROUND(SUM(i.tunits*NVL(c.avgstdno,0))/SUM(i.tunits),2) avg_number,
 ROUND(SUM(i.tunits*NVL(c.avgstdwgt,0))/SUM(i.tunits),2) avg_weight,
 ROUND(SUM(i.tunits*NVL(c.avgstdno,0))/1000000,2) abundance,
 ROUND(SUM(i.tunits*NVL(c.avgstdwgt,0))/1000,2) biomass,
 ROUND(SUM(i.temp_area*i.avgbtemp)/SUM(i.temp_area),1) bottom_temperature,
 ROUND(SUM(i.sal_area*i.avgbsal)/SUM(i.sal_area),1) bottom_salinity
 FROM (SELECT year, strat, avgstdwgt, avgstdno
 FROM nwags.gsscat_mv
 WHERE series in(:bind__Series)
 AND spec in (SELECT research FROM species_codes WHERE common=:bind__Species)
 AND strat in (SELECT DISTINCT strat FROM mflib.gsmgt WHERE unit in(:bind__Strata))
		 AND year BETWEEN :bind__Start_Year AND :bind__End_Year
 ) c,
 (SELECT year, i.strat, ROUND(area/(1.75*(41/6080.2))) tunits, ntows,
 DECODE(NVL(avgbtemp, -99),-99,NULL,area) temp_area, avgbtemp,
 DECODE(NVL(avgbsal, -99),-99,NULL,area) sal_area, avgbsal
 FROM nwags.gssinf_mv i,
 nwags.gsstratum s
 WHERE series in(:bind__Series)
 AND i.strat in (SELECT DISTINCT strat FROM mflib.gsmgt WHERE unit in(:bind__Strata))
 AND s.strat=i.strat
		 AND year BETWEEN :bind__Start_Year AND :bind__End_Year
 ) i
 WHERE c.strat(+)=i.strat
 AND c.year(+)=i.year
 GROUP BY i.year
 ORDER BY 1;
 " />
<fieldset><legend>Series</legend>
<select name=bind__Series size="1">
 <option value="4VWCOD">4VWCOD</option>
 <option value="FALL">FALL</option>
 <option value="GEORGES">GEORGES</option>
 <option value="S. GULF">S. GULF</option>
 <option value="SLOPE">SLOPE</option>
 <option value="SPRING">SPRING</option>
 <option value="SUMMER" selected>SUMMER</option>
</select>
</fieldset>
<fieldset><legend>Date Range</legend>
<select name=bind__Start_Year>
 <option value="1970">1970</option>
 <option value="1971">1971</option>
 <option value="1972">1972</option>
 <option value="1973">1973</option>
 <option value="1974">1974</option>
 <option value="1975">1975</option>
 <option value="1976">1976</option>
 <option value="1977">1977</option>
 <option value="1978">1978</option>
 <option value="1979">1979</option>
 <option value="1980">1980</option>
 <option value="1981">1981</option>
 <option value="1982">1982</option>
 <option value="1983">1983</option>
 <option value="1984">1984</option>
 <option value="1985">1985</option>
 <option value="1986">1986</option>
 <option value="1987">1987</option>
 <option value="1988">1988</option>
 <option value="1989">1989</option>
 <option value="1990">1990</option>
 <option value="1991">1991</option>
 <option value="1992">1992</option>
 <option value="1993">1993</option>
 <option value="1994">1994</option>
 <option value="1995">1995</option>
 <option value="1996">1996</option>
 <option value="1997">1997</option>
 <option value="1998">1998</option>
 <option value="1999">1999</option>
 <option value="2000">2000</option>
 <option value="2001">2001</option>
 <option value="2002">2002</option>
 <option value="2003">2003</option>
 <option value="2004">2004</option>
 <option value="2005">2005</option>
 <option value="2006">2006</option>
 <option value="2007">2007</option>
 <option value="2008">2008</option>
 <option value="2009">2009</option>
 <option value="2010" selected>2010</option>
 <option value="2011">2011</option>
 <option value="2012">2012</option>
 <option value="2013">2013</option>
</select> - 
<select name=bind__End_Year>
 <option value="1970">1970</option>
 <option value="1971">1971</option>
 <option value="1972">1972</option>
 <option value="1973">1973</option>
 <option value="1974">1974</option>
 <option value="1975">1975</option>
 <option value="1976">1976</option>
 <option value="1977">1977</option>
 <option value="1978">1978</option>
 <option value="1979">1979</option>
 <option value="1980">1980</option>
 <option value="1981">1981</option>
 <option value="1982">1982</option>
 <option value="1983">1983</option>
 <option value="1984">1984</option>
 <option value="1985">1985</option>
 <option value="1986">1986</option>
 <option value="1987">1987</option>
 <option value="1988">1988</option>
 <option value="1989">1989</option>
 <option value="1990">1990</option>
 <option value="1991">1991</option>
 <option value="1992">1992</option>
 <option value="1993">1993</option>
 <option value="1994">1994</option>
 <option value="1995">1995</option>
 <option value="1996">1996</option>
 <option value="1997">1997</option>
 <option value="1998">1998</option>
 <option value="1999">1999</option>
 <option value="2000">2000</option>
 <option value="2001">2001</option>
 <option value="2002">2002</option>
 <option value="2003">2003</option>
 <option value="2004">2004</option>
 <option value="2005">2005</option>
 <option value="2006">2006</option>
 <option value="2007">2007</option>
 <option value="2008">2008</option>
 <option value="2009">2009</option>
 <option value="2010">2010</option>
 <option value="2011">2011</option>
 <option value="2012">2012</option>
 <option value="2013" selected>2013</option>
</select>
</fieldset>
<fieldset><legend>Area(s)</legend>
<select name=bind__Strata size="5" multiple>
<option value="ALL" selected>ALL</option>
<option value="4T">4T</option>
<option value="4VN">4VN</option>
<option value="4VS">4VS</option>
<option value="4VSW">4VSW</option>
<option value="4VW">4VW</option>
<option value="4VWX">4VWX</option>
<option value="4W">4W</option>
<option value="4X">4X</option>
<option value="4Xmno">4Xmno</option>
<option value="4Xmnop">4Xmnop</option>
<option value="4Xmnopq">4Xmnopq</option>
<option value="4Xmnopqr">4Xmnopqr</option>
<option value="4Xpq">4Xpq</option>
<option value="4Xqrs">4Xqrs</option>
<option value="4Xrs">4Xrs</option>
<option value="5Y">5Y</option>
<option value="5Z">5Z</option>
<option value="5ZJM">5ZJM</option>
<option value="UNIT2">UNIT2</option>
<option value="UNIT3">UNIT3</option>
<option value="396">396</option>
<option value="397">397</option>
<option value="398">398</option>
<option value="399">399</option>
<option value="400">400</option>
<option value="401">401</option>
<option value="402">402</option>
<option value="403">403</option>
<option value="404">404</option>
<option value="405">405</option>
<option value="406">406</option>
<option value="407">407</option>
<option value="408">408</option>
<option value="409">409</option>
<option value="410">410</option>
<option value="411">411</option>
<option value="434">434</option>
<option value="436">436</option>
<option value="437">437</option>
<option value="438">438</option>
<option value="439">439</option>
<option value="440">440</option>
<option value="441">441</option>
<option value="442">442</option>
<option value="443">443</option>
<option value="444">444</option>
<option value="445">445</option>
<option value="446">446</option>
<option value="447">447</option>
<option value="448">448</option>
<option value="449">449</option>
<option value="450">450</option>
<option value="451">451</option>
<option value="452">452</option>
<option value="453">453</option>
<option value="454">454</option>
<option value="455">455</option>
<option value="456">456</option>
<option value="457">457</option>
<option value="458">458</option>
<option value="459">459</option>
<option value="460">460</option>
<option value="461">461</option>
<option value="462">462</option>
<option value="463">463</option>
<option value="464">464</option>
<option value="465">465</option>
<option value="466">466</option>
<option value="470">470</option>
<option value="471">471</option>
<option value="472">472</option>
<option value="473">473</option>
<option value="474">474</option>
<option value="475">475</option>
<option value="476">476</option>
<option value="477">477</option>
<option value="478">478</option>
<option value="480">480</option>
<option value="481">481</option>
<option value="482">482</option>
<option value="483">483</option>
<option value="484">484</option>
<option value="485">485</option>
<option value="490">490</option>
<option value="491">491</option>
<option value="492">492</option>
<option value="493">493</option>
<option value="494">494</option>
<option value="495">495</option>
<option value="496">496</option>
<option value="497">497</option>
<option value="498">498</option>
<option value="516">516</option>
<option value="517">517</option>
<option value="518">518</option>
<option value="519">519</option>
<option value="520">520</option>
<option value="521">521</option>
<option value="522">522</option>
<option value="551">551</option>
<option value="552">552</option>
<option value="553">553</option>
<option value="554">554</option>
<option value="555">555</option>
<option value="556">556</option>
<option value="557">557</option>
<option value="5Z1">5Z1</option>
<option value="5Z2">5Z2</option>
<option value="5Z3">5Z3</option>
<option value="5Z4">5Z4</option>
<option value="5Z5">5Z5</option>
<option value="5Z6">5Z6</option>
<option value="5Z7">5Z7</option>
<option value="5Z8">5Z8</option>
<option value="802">802</option>
<option value="803">803</option>
<option value="804">804</option>
<option value="812">812</option>
<option value="813">813</option>
<option value="814">814</option>
<option value="822">822</option>
<option value="823">823</option>
<option value="824">824</option>
<option value="899">899</option>
</select>
</fieldset>
<fieldset><legend>Species</legend>
<select name=bind__Species size="5">
<option value="4-LINE SNAKE BLENNY">4-LINE SNAKE BLENNY</option>
<option value="ALEWIFE">ALEWIFE</option>
<option value="ALLIGATOR FISH (NS)">ALLIGATOR FISH (NS)</option>
<option value="ALLIGATORFISH">ALLIGATORFISH</option>
<option value="AMERICAN JOHN DORY">AMERICAN JOHN DORY</option>
<option value="AMERICAN LOBSTER">AMERICAN LOBSTER</option>
<option value="AMERICAN PLAICE">AMERICAN PLAICE</option>
<option value="AMERICAN STRAPTAIL GRENADIER">AMERICAN STRAPTAIL GRENADIER</option>
<option value="ARCTIC EELPOUT">ARCTIC EELPOUT</option>
<option value="ARCTIC HOOKEAR SCULPIN">ARCTIC HOOKEAR SCULPIN</option>
<option value="ARGENTINE(ATLANTIC)">ARGENTINE(ATLANTIC)</option>
<option value="ATLANTIC BATFISH">ATLANTIC BATFISH</option>
<option value="ATLANTIC ROCK CRAB">ATLANTIC ROCK CRAB</option>
<option value="ATLANTIC SAURY,NEEDLEFISH">ATLANTIC SAURY,NEEDLEFISH</option>
<option value="ATLANTIC SEA POACHER">ATLANTIC SEA POACHER</option>
<option value="ATLANTIC SEASNAIL">ATLANTIC SEASNAIL</option>
<option value="ATLANTIC SILVER HATCHFISH">ATLANTIC SILVER HATCHFISH</option>
<option value="ATLANTIC SOFT POUT">ATLANTIC SOFT POUT</option>
<option value="ATLANTIC SPINY LUMPSUCKER">ATLANTIC SPINY LUMPSUCKER</option>
<option value="BARNDOOR SKATE">BARNDOOR SKATE</option>
<option value="BARRACUDINA,UNIDENTIFIED">BARRACUDINA,UNIDENTIFIED</option>
<option value="BATFISHES">BATFISHES</option>
<option value="BEARDFISH">BEARDFISH</option>
<option value="BLACK DOGFISH">BLACK DOGFISH</option>
<option value="BLACKSNOUT SEASNAIL">BLACKSNOUT SEASNAIL</option>
<option value="BLENNIES (NS)">BLENNIES (NS)</option>
<option value="BLUEBACK HERRING">BLUEBACK HERRING</option>
<option value="BOA DRAGONFISH">BOA DRAGONFISH</option>
<option value="BRILL/WINDOWPANE">BRILL/WINDOWPANE</option>
<option value="BUTTERFISH">BUTTERFISH</option>
<option value="CAPELIN">CAPELIN</option>
<option value="COD(ATLANTIC)">COD(ATLANTIC)</option>
<option value="COMMON WOLF EEL">COMMON WOLF EEL</option>
<option value="CUNNER">CUNNER</option>
<option value="CUSK">CUSK</option>
<option value="CUSK EELS (NS)">CUSK EELS (NS)</option>
<option value="DAUBED SHANNY">DAUBED SHANNY</option>
<option value="DEEP SEA RED CRAB">DEEP SEA RED CRAB</option>
<option value="DUCKBILL OCEANIC EEL">DUCKBILL OCEANIC EEL</option>
<option value="EELPOUT,NEWFOUNDLAND">EELPOUT,NEWFOUNDLAND</option>
<option value="EELPOUTS(NS)">EELPOUTS(NS)</option>
<option value="FAWN CUSK EEL">FAWN CUSK EEL</option>
<option value="FINFISHES (NS)">FINFISHES (NS)</option>
<option value="FOURBEARD ROCKLING">FOURBEARD ROCKLING</option>
<option value="FOURSPOT FLOUNDER">FOURSPOT FLOUNDER</option>
<option value="GRAY'S CUTTHROAT EEL">GRAY'S CUTTHROAT EEL</option>
<option value="GRENADIERS (NS)">GRENADIERS (NS)</option>
<option value="GRUBBY(LITTLE)">GRUBBY(LITTLE)</option>
<option value="GULF STREAM FLOUNDER">GULF STREAM FLOUNDER</option>
<option value="HADDOCK" selected>HADDOCK</option>
<option value="HALIBUT(ATLANTIC)">HALIBUT(ATLANTIC)</option>
<option value="HATCHETFISH">HATCHETFISH</option>
<option value="HERRING(ATLANTIC)">HERRING(ATLANTIC)</option>
<option value="HOOKEAR SCULPIN (NS)">HOOKEAR SCULPIN (NS)</option>
<option value="HOOKEAR SCULPIN,ATL.">HOOKEAR SCULPIN,ATL.</option>
<option value="HYAS COARCTATUS">HYAS COARCTATUS</option>
<option value="ICELAND SCALLOP">ICELAND SCALLOP</option>
<option value="JONAH CRAB">JONAH CRAB</option>
<option value="LANTERNFISH (NS)">LANTERNFISH (NS)</option>
<option value="LANTERNFISH,HORNED">LANTERNFISH,HORNED</option>
<option value="LAVAL'S EELPOUT">LAVAL'S EELPOUT</option>
<option value="LITTLE SKATE">LITTLE SKATE</option>
<option value="LOLIGO SP.">LOLIGO SP.</option>
<option value="LONG-FINNED SQUID">LONG-FINNED SQUID</option>
<option value="LONGFIN HAKE">LONGFIN HAKE</option>
<option value="LONGHORN SCULPIN">LONGHORN SCULPIN</option>
<option value="LONGNOSE GREENEYE">LONGNOSE GREENEYE</option>
<option value="LONGNOSE GRENADIER">LONGNOSE GRENADIER</option>
<option value="LUMPFISH">LUMPFISH</option>
<option value="MACKEREL(ATLANTIC)">MACKEREL(ATLANTIC)</option>
<option value="MAILED SCULPIN">MAILED SCULPIN</option>
<option value="MARLIN-SPIKE GRENADIER">MARLIN-SPIKE GRENADIER</option>
<option value="MONKFISH,GOOSEFISH,ANGLER">MONKFISH,GOOSEFISH,ANGLER</option>
<option value="MULLER'S PEARLSIDES">MULLER'S PEARLSIDES</option>
<option value="MYCTOPHUM SP.">MYCTOPHUM SP.</option>
<option value="NINTH UNIDENTIFIED PER SET">NINTH UNIDENTIFIED PER SET</option>
<option value="NORTHERN HAGFISH">NORTHERN HAGFISH</option>
<option value="NORTHERN SAND LANCE">NORTHERN SAND LANCE</option>
<option value="NORTHERN STONE">NORTHERN STONE</option>
<option value="NORTHERN WOLFFISH">NORTHERN WOLFFISH</option>
<option value="NORTHERN,COMMON SEAROBIN">NORTHERN,COMMON SEAROBIN</option>
<option value="OCEAN POUT(COMMON)">OCEAN POUT(COMMON)</option>
<option value="OFF-SHORE HAKE">OFF-SHORE HAKE</option>
<option value="OMMASTREPHES SP.">OMMASTREPHES SP.</option>
<option value="PALLID SCULPIN">PALLID SCULPIN</option>
<option value="POLAR EELPOUT">POLAR EELPOUT</option>
<option value="POLAR SCULPIN">POLAR SCULPIN</option>
<option value="POLLOCK">POLLOCK</option>
<option value="RADIATED SHANNY">RADIATED SHANNY</option>
<option value="RAINBOW SMELT">RAINBOW SMELT</option>
<option value="REDFISH UNSEPARATED">REDFISH UNSEPARATED</option>
<option value="ROCK GRENADIER(ROUNDNOSE)">ROCK GRENADIER(ROUNDNOSE)</option>
<option value="ROCK GUNNEL(EEL)">ROCK GUNNEL(EEL)</option>
<option value="ROSEFISH(BLACK BELLY)">ROSEFISH(BLACK BELLY)</option>
<option value="ROUGHHEAD GRENADIER">ROUGHHEAD GRENADIER</option>
<option value="ROUGHNOSE GRENADIER">ROUGHNOSE GRENADIER</option>
<option value="ROUND SKATE">ROUND SKATE</option>
<option value="SAND LANCE (NS)">SAND LANCE (NS)</option>
<option value="SAND LANCES (NS)">SAND LANCES (NS)</option>
<option value="SCALLOPS">SCALLOPS</option>
<option value="SEA LAMPREY">SEA LAMPREY</option>
<option value="SEA RAVEN">SEA RAVEN</option>
<option value="SEA SCALLOP">SEA SCALLOP</option>
<option value="SEA TADPOLE">SEA TADPOLE</option>
<option value="SEASNAIL UNIDENTIFIED">SEASNAIL UNIDENTIFIED</option>
<option value="SEASNAIL,DUSKY">SEASNAIL,DUSKY</option>
<option value="SEASNAIL,GELATINOUS">SEASNAIL,GELATINOUS</option>
<option value="SHAD AMERICAN">SHAD AMERICAN</option>
<option value="SHORT BARRACUDINA">SHORT BARRACUDINA</option>
<option value="SHORT-FIN SQUID">SHORT-FIN SQUID</option>
<option value="SHORT-NOSE GREENEYE">SHORT-NOSE GREENEYE</option>
<option value="SHORTHORN SCULPIN">SHORTHORN SCULPIN</option>
<option value="SHORTTAILED EELPOUT(VAHL)">SHORTTAILED EELPOUT(VAHL)</option>
<option value="SILVER HAKE">SILVER HAKE</option>
<option value="SKATES (NS)">SKATES (NS)</option>
<option value="SLENDER EELBLENNY">SLENDER EELBLENNY</option>
<option value="SMOOTH SKATE">SMOOTH SKATE</option>
<option value="SNAKE BLENNY">SNAKE BLENNY</option>
<option value="SNAKE EEL">SNAKE EEL</option>
<option value="SNIPE EEL">SNIPE EEL</option>
<option value="SNOW CRAB (QUEEN)">SNOW CRAB (QUEEN)</option>
<option value="SNUBNOSE SLIME EEL">SNUBNOSE SLIME EEL</option>
<option value="SPATULATE SCULPIN">SPATULATE SCULPIN</option>
<option value="SPINY DOGFISH">SPINY DOGFISH</option>
<option value="SPINY EEL">SPINY EEL</option>
<option value="SPOTTED HAKE">SPOTTED HAKE</option>
<option value="SPOTTED WOLFFISH">SPOTTED WOLFFISH</option>
<option value="SQUIRREL OR RED HAKE">SQUIRREL OR RED HAKE</option>
<option value="STOUT SAWPALATE">STOUT SAWPALATE</option>
<option value="STRIPED ATLANTIC WOLFFISH">STRIPED ATLANTIC WOLFFISH</option>
<option value="SUMMER FLOUNDER">SUMMER FLOUNDER</option>
<option value="THORNY SKATE">THORNY SKATE</option>
<option value="THREEBEARD ROCKLING">THREEBEARD ROCKLING</option>
<option value="TOAD CRAB">TOAD CRAB</option>
<option value="TOMCOD(ATLANTIC)">TOMCOD(ATLANTIC)</option>
<option value="TURBOT,GREENLAND HALIBUT">TURBOT,GREENLAND HALIBUT</option>
<option value="TWOHORN SCULPIN">TWOHORN SCULPIN</option>
<option value="UNID. FISH">UNID. FISH</option>
<option value="VIPERFISH">VIPERFISH</option>
<option value="WHITE BARRACUDINA">WHITE BARRACUDINA</option>
<option value="WHITE HAKE">WHITE HAKE</option>
<option value="WINTER FLOUNDER">WINTER FLOUNDER</option>
<option value="WINTER SKATE">WINTER SKATE</option>
<option value="WITCH FLOUNDER">WITCH FLOUNDER</option>
<option value="WOLF EELPOUT">WOLF EELPOUT</option>
<option value="WRYMOUTH">WRYMOUTH</option>
<option value="YELLOWTAIL FLOUNDER">YELLOWTAIL FLOUNDER</option>
</select>
</fieldset>
<div style="clear:both;"/>
<fieldset><legend>Overlay plots</legend>
(Number & Weight) <br> (Abundance & Biomass) <br> (Temp & Salinity) <br>
<input type="radio", name="Data2", value="true" checked> Yes</input>
<input type="radio", name="Data2", value="false" > No</input>
</fieldset>
<div style="clear:both;"/>
<input type=submit value="Run Analysis">
</form>
<div style="clear:both;"/>
<script type="text/javascript">
<!-- 
document.write('<input type="checkbox" onclick=\x22parseIt(0);toggle(\x27theSQL0\x27);\x22>Show Sql ...</input>')
//-->
</script>
<div style="clear:both;"/>
<div id="theSQL0" class="code" style="display:none" onclick="selectText('theSQL0')">Please select some options to create the SQL</div>
</fieldset>
<div style="clear:both;"/>
<div id="scriptInfo">
<p>April 17, 2013 - Analysis now uses R rather than Statserver - if you notice any problems with this page, please contact Mike McMahon</p> 
</div>
</BODY>
</HTML>